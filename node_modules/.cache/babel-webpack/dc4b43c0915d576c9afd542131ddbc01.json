{"ast":null,"code":"import { transferArrayItem } from '@angular/cdk/drag-drop';\nimport { TaskDialogComponent } from './task-dialog/task-dialog.component';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/fire/firestore\";\nimport * as i3 from \"@angular/material/toolbar\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/card\";\nimport * as i7 from \"@angular/cdk/drag-drop\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"./task/task.component\";\n\nfunction AppComponent_p_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1, \"Nothing to do now\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_app_task_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-task\", 15);\n    i0.ɵɵlistener(\"edit\", function AppComponent_app_task_24_Template_app_task_edit_0_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.editTask(\"todo\", $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const task_r9 = ctx.$implicit;\n    i0.ɵɵproperty(\"task\", task_r9);\n  }\n}\n\nfunction AppComponent_p_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1, \"No task in progress rn\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_app_task_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-task\", 15);\n    i0.ɵɵlistener(\"edit\", function AppComponent_app_task_34_Template_app_task_edit_0_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.editTask(\"inProgress\", $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const task_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"task\", task_r12);\n  }\n}\n\nfunction AppComponent_p_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1, \"Nothing is completed rn\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AppComponent_app_task_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-task\", 15);\n    i0.ɵɵlistener(\"edit\", function AppComponent_app_task_44_Template_app_task_edit_0_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.editTask(\"done\", $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const task_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"task\", task_r15);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return [a0, a1];\n};\n\nconst getObservable = collection => {\n  const subject = new BehaviorSubject([]);\n  collection.valueChanges({\n    idField: 'id'\n  }).subscribe(val => {\n    subject.next(val);\n  });\n  return subject;\n};\n\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    // injecting AngularFirestore in AppComponent's constructor\n    constructor(dialog, store) {\n      this.dialog = dialog;\n      this.store = store; // use angularFirestore to get the collection's content directly from the database.\n\n      this.todo = getObservable(this.store.collection('todo'));\n      this.inProgress = getObservable(this.store.collection('inProgress'));\n      this.done = getObservable(this.store.collection('done'));\n    } //edit method to edit tasks\n\n\n    editTask(list, task) {\n      const dialogRef = this.dialog.open(TaskDialogComponent, {\n        width: '400px',\n        data: {\n          task,\n          enableDelete: true\n        }\n      }); //delete the taks if the delete button clicked\n\n      dialogRef.afterClosed().subscribe(result => {\n        if (result.delete) {\n          //access the target task using firebase sdk and delete or update\n          this.store.collection(list).doc(task.id).delete();\n        } else {\n          this.store.collection(list).doc(task.id).update(task);\n        }\n      });\n    } //drop the list from taks when called\n\n\n    drop(event) {\n      if (event.previousContainer === event.container) {\n        return;\n      }\n\n      const item = event.previousContainer.data[event.previousIndex];\n      this.store.firestore.runTransaction(() => {\n        const promise = Promise.all([this.store.collection(event.previousContainer.id).doc(item.id).delete(), this.store.collection(event.container.id).add(item)]);\n        return promise;\n      });\n      transferArrayItem(event.previousContainer.data, event.container.data, event.previousIndex, event.currentIndex);\n    } //func to add a new task\n\n\n    newTask() {\n      const dialogRef = this.dialog.open(TaskDialogComponent, {\n        //open a dialog when user tries to add a new task\n        width: '400px',\n        data: {\n          task: {}\n        }\n      }); //add the new task to the to do list\n\n      dialogRef.afterClosed().subscribe(result => {\n        if (!result) {\n          return;\n        }\n\n        this.store.collection('todo').add(result.task);\n      });\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.AngularFirestore));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 46,\n    vars: 39,\n    consts: [[\"color\", \"secondary\"], [\"src\", \"https://i.ibb.co/0qKBQtc/logo.png\", \"alt\", \"logo\", \"width\", \"80px\", \"height\", \"80px\"], [\"id\", \"my_div\", 1, \"content-wrapper\"], [\"mat-button\", \"\", 3, \"click\"], [1, \"container-wrapper\"], [1, \"container\"], [\"cdkDropList\", \"\", \"id\", \"todo\", 1, \"list\", 3, \"cdkDropListData\", \"cdkDropListConnectedTo\", \"cdkDropListDropped\"], [\"todoList\", \"cdkDropList\"], [\"class\", \"empty-label\", 4, \"ngIf\"], [\"cdkDrag\", \"\", 3, \"task\", \"edit\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDropList\", \"\", \"id\", \"inProgress\", 1, \"list\", 3, \"cdkDropListData\", \"cdkDropListConnectedTo\", \"cdkDropListDropped\"], [\"inProgressList\", \"cdkDropList\"], [\"cdkDropList\", \"\", \"id\", \"done\", 1, \"list\", 3, \"cdkDropListData\", \"cdkDropListConnectedTo\", \"cdkDropListDropped\"], [\"doneList\", \"cdkDropList\"], [1, \"empty-label\"], [\"cdkDrag\", \"\", 3, \"task\", \"edit\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-toolbar\", 0);\n        i0.ɵɵelement(1, \"img\", 1);\n        i0.ɵɵelementStart(2, \"span\");\n        i0.ɵɵtext(3, \"SG Solutions \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"hr\");\n        i0.ɵɵelementStart(5, \"i\");\n        i0.ɵɵtext(6, \"To do List- made by SG Solutions\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 2);\n        i0.ɵɵelementStart(8, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_8_listener() {\n          return ctx.newTask();\n        });\n        i0.ɵɵelementStart(9, \"mat-icon\");\n        i0.ɵɵtext(10, \"add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11, \" Add New Task to do \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 4);\n        i0.ɵɵelementStart(13, \"div\", 5);\n        i0.ɵɵtext(14, \" ... \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 4);\n        i0.ɵɵelementStart(16, \"div\", 5);\n        i0.ɵɵelementStart(17, \"h2\");\n        i0.ɵɵtext(18, \"To Do\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"mat-card\", 6, 7);\n        i0.ɵɵlistener(\"cdkDropListDropped\", function AppComponent_Template_mat_card_cdkDropListDropped_19_listener($event) {\n          return ctx.drop($event);\n        });\n        i0.ɵɵpipe(21, \"async\");\n        i0.ɵɵtemplate(22, AppComponent_p_22_Template, 2, 0, \"p\", 8);\n        i0.ɵɵpipe(23, \"async\");\n        i0.ɵɵtemplate(24, AppComponent_app_task_24_Template, 1, 1, \"app-task\", 9);\n        i0.ɵɵpipe(25, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 5);\n        i0.ɵɵelementStart(27, \"h2\");\n        i0.ɵɵtext(28, \"In progress\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"mat-card\", 10, 11);\n        i0.ɵɵlistener(\"cdkDropListDropped\", function AppComponent_Template_mat_card_cdkDropListDropped_29_listener($event) {\n          return ctx.drop($event);\n        });\n        i0.ɵɵpipe(31, \"async\");\n        i0.ɵɵtemplate(32, AppComponent_p_32_Template, 2, 0, \"p\", 8);\n        i0.ɵɵpipe(33, \"async\");\n        i0.ɵɵtemplate(34, AppComponent_app_task_34_Template, 1, 1, \"app-task\", 9);\n        i0.ɵɵpipe(35, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 5);\n        i0.ɵɵelementStart(37, \"h2\");\n        i0.ɵɵtext(38, \"Completed \\u2713\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"mat-card\", 12, 13);\n        i0.ɵɵlistener(\"cdkDropListDropped\", function AppComponent_Template_mat_card_cdkDropListDropped_39_listener($event) {\n          return ctx.drop($event);\n        });\n        i0.ɵɵpipe(41, \"async\");\n        i0.ɵɵtemplate(42, AppComponent_p_42_Template, 2, 0, \"p\", 8);\n        i0.ɵɵpipe(43, \"async\");\n        i0.ɵɵtemplate(44, AppComponent_app_task_44_Template, 1, 1, \"app-task\", 9);\n        i0.ɵɵpipe(45, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(20);\n\n        const _r3 = i0.ɵɵreference(30);\n\n        const _r6 = i0.ɵɵreference(40);\n\n        let tmp_2_0;\n        let tmp_6_0;\n        let tmp_10_0;\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"cdkDropListData\", i0.ɵɵpipeBind1(21, 12, ctx.todo))(\"cdkDropListConnectedTo\", i0.ɵɵpureFunction2(30, _c0, _r6, _r3));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = i0.ɵɵpipeBind1(23, 14, ctx.todo)) == null ? null : tmp_2_0.length) === 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(25, 16, ctx.todo));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"cdkDropListData\", i0.ɵɵpipeBind1(31, 18, ctx.inProgress))(\"cdkDropListConnectedTo\", i0.ɵɵpureFunction2(33, _c0, _r0, _r6));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = i0.ɵɵpipeBind1(33, 20, ctx.inProgress)) == null ? null : tmp_6_0.length) === 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(35, 22, ctx.inProgress));\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"cdkDropListData\", i0.ɵɵpipeBind1(41, 24, ctx.done))(\"cdkDropListConnectedTo\", i0.ɵɵpureFunction2(36, _c0, _r0, _r3));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_10_0 = i0.ɵɵpipeBind1(43, 26, ctx.done)) == null ? null : tmp_10_0.length) === 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(45, 28, ctx.done));\n      }\n    },\n    directives: [i3.MatToolbar, i4.MatButton, i5.MatIcon, i6.MatCard, i7.CdkDropList, i8.NgIf, i8.NgForOf, i9.TaskComponent, i7.CdkDrag],\n    pipes: [i8.AsyncPipe],\n    styles: [\"mat-toolbar[_ngcontent-%COMP%]{margin-bottom:20px}mat-toolbar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:10px}.content-wrapper[_ngcontent-%COMP%]{max-width:1400px;margin:auto}.container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]{width:400px;margin:0 25px 25px 0}.list[_ngcontent-%COMP%]{border:1px solid #000;min-height:80px;border-radius:4px}app-new-task[_ngcontent-%COMP%]{margin-bottom:30px}.empty-label[_ngcontent-%COMP%]{font-size:2em;padding-top:10px;text-align:center;opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}#my-div[_ngcontent-%COMP%]{background-image:url(https://i.ibb.co/0qKBQtc/logo.png);background-repeat:no-repeat,repeat;background-color:aqua}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}